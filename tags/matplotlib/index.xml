<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>matplotlib on Musings</title><link>https://chahak13.github.io/tags/matplotlib/</link><description>Recent content in matplotlib on Musings</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://chahak13.github.io/tags/matplotlib/index.xml" rel="self" type="application/rss+xml"/><item><title>Hillshading in matplotlib</title><link>https://chahak13.github.io/posts/hillshading_in_matplotlib/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://chahak13.github.io/posts/hillshading_in_matplotlib/</guid><description>Matplotlib provides a light source and shading library. This can be used to create some extremely great and pleasing visualizations - for examples see this Twitter post by James Beattie or this visualization by Noam Vogt-Vincent. This has increased my curiousity about what and how to use this shading module of matplotlib. This particular post will be based on the simple example shown on the matplotlib page (here).
Let us first import the required libraries.</description><content>&lt;p>Matplotlib provides a light source and shading library. This can be used to create some extremely great and pleasing visualizations - for examples see &lt;a href="https://twitter.com/astro%5Fturb/status/1392315741177671682?s=09">this&lt;/a> Twitter post by James Beattie or &lt;a href="https://twitter.com/noam%5Fvv/status/1392960446391623683">this&lt;/a> visualization by Noam Vogt-Vincent. This has increased my curiousity about what and how to use this shading module of matplotlib. This particular post will be based on the simple example shown on the matplotlib page (&lt;a href="https://matplotlib.org/stable/gallery/mplot3d/custom%5Fshaded%5F3d%5Fsurface.html#sphx-glr-gallery-mplot3d-custom-shaded-3d-surface-py">here&lt;/a>).&lt;/p>
&lt;p>Let us first import the required libraries.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-jupyter-python" data-lang="jupyter-python">import numpy as np
import matplotlib.pyplot as plt
from matplotlib import cm, cbook
from matplotlib.colors import LightSource
&lt;/code>&lt;/pre>&lt;p>Now that we have the libraries, we need to set up the data that we will use for plotting. We will use the sample data provided in matplotlib.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-jupyter-python" data-lang="jupyter-python">dem = cbook.get_sample_data(&amp;quot;jacksboro_fault_dem.npz&amp;quot;, np_load=True)
z = dem['elevation']
nrows, ncols = z.shape
x = np.linspace(dem[&amp;quot;xmin&amp;quot;], dem[&amp;quot;xmax&amp;quot;], ncols)
y = np.linspace(dem[&amp;quot;ymin&amp;quot;], dem[&amp;quot;ymax&amp;quot;], nrows)
x, y = np.meshgrid(x, y)
region = np.s_[5:50, 5:50]
x, y, z = x[region], y[region], z[region]
&lt;/code>&lt;/pre>&lt;p>We will first use this data to plot a simple surface plot without any light sources to see what it adds.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-jupyter-python" data-lang="jupyter-python">fig, ax = plt.subplots(subplot_kw=dict(projection='3d'), figsize=(8,8))
surf = ax.plot_surface(x, y, z, rstride=1, cstride=1, linewidth=0, antialiased=False, shade=False, cmap=plt.get_cmap('gist_earth'))
ax.set_xticks([])
ax.set_yticks([])
ax.set_zticks([])
fig.savefig(&amp;quot;./images/plain_surface.png&amp;quot;)
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">[]
&lt;/code>&lt;/pre>&lt;/div>
&lt;figure class="left" >
&lt;img src="https://chahak13.github.io/ox-hugo/plain_surface.png" />
&lt;/figure>
&lt;p>Now, if we add a lightsource to this, we should be able to see the differences in the plot in a much better way.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-jupyter-python" data-lang="jupyter-python">fig_l, ax_l = plt.subplots(subplot_kw=dict(projection='3d'), figsize=(8,8))
ls = LightSource(0, 45)
rgb = ls.shade(z, cmap=cm.gist_earth, vert_exag=0.1, blend_mode='soft')
ax_l.plot_surface(x, y, z, rstride=1, cstride=1, facecolors=rgb, linewidth=0, antialiased=False, shade=False)
ax_l.set_xticks([])
ax_l.set_yticks([])
ax_l.set_zticks([])
fig_l.savefig('./images/light_surface.png')
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text">[]
&lt;/code>&lt;/pre>&lt;/div>
&lt;figure class="left" >
&lt;img src="https://chahak13.github.io/ox-hugo/light_surface.png" />
&lt;/figure>
&lt;p>We will try and animate this lightsource to make its presence more visible.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-jupyter-python" data-lang="jupyter-python">from matplotlib.animation import FuncAnimation
def update(frame):
ax_l.collections = []
ls = LightSource(frame%360, 45)
rgb = ls.shade(z, cmap=cm.gist_earth, vert_exag=0.1, blend_mode='soft')
ax_l.plot_surface(x, y, z, rstride=1, cstride=1, facecolors=rgb, linewidth=0, antialiased=False, shade=False)
anim = FuncAnimation(fig_l, update, frames=360)
anim.save(&amp;quot;./images/lightsource.gif&amp;quot;, writer=&amp;quot;imagemagick&amp;quot;, fps=60)
# anim.save(&amp;quot;./images/lightsource.mp4&amp;quot;, writer=&amp;quot;ffmpeg&amp;quot;, fps=60)
&lt;/code>&lt;/pre>
&lt;figure class="left" >
&lt;img src="https://chahak13.github.io/ox-hugo/lightsource.gif" />
&lt;/figure></content></item></channel></rss>