<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>tacc on Musings</title><link>https://chahak13.github.io/tags/tacc/</link><description>Recent content in tacc on Musings</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://chahak13.github.io/tags/tacc/index.xml" rel="self" type="application/rss+xml"/><item><title>Stampede2 User Guide - TACC User Portal</title><link>https://chahak13.github.io/posts/stampede2_user_guide_tacc_user_portal/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://chahak13.github.io/posts/stampede2_user_guide_tacc_user_portal/</guid><description>System Overview KNL Compute Nodes Stampede2 has 4,200 Knight&amp;rsquo;s Landing (KNL) compute nodes. An overview of the specifications of each node is as follows
Model Intel Xeon Phi 7250 (&amp;ldquo;Knights Landing&amp;rdquo;) Total cores per KNL node 68 cores on a single socket Hardware threads per core 4 Hardware threads per node 68 x 4 = 272 Clock rate 1.</description><content>&lt;h2 id="system-overview">System Overview&lt;/h2>
&lt;h3 id="knl-compute-nodes">KNL Compute Nodes&lt;/h3>
&lt;p>Stampede2 has 4,200 Knight&amp;rsquo;s Landing (KNL) compute nodes. An overview of the specifications of each node is as follows&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Model&lt;/th>
&lt;th>Intel Xeon Phi 7250 (&amp;ldquo;Knights Landing&amp;rdquo;)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Total cores per KNL node&lt;/td>
&lt;td>68 cores on a single socket&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hardware threads per core&lt;/td>
&lt;td>4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hardware threads per node&lt;/td>
&lt;td>68 x 4 = 272&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Clock rate&lt;/td>
&lt;td>1.4GHz&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RAM&lt;/td>
&lt;td>96GB DDR4 plus 16GB high-speed MCDRAM. Configurable in two important ways&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cache&lt;/td>
&lt;td>32KB L1 data cache/core; 1MB L2/two-core tile. In default config, MCDRAM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>operates as 16GB direct-mapped L3.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>All but 504 KNL nodes have a 107GB &lt;code>/tmp&lt;/code> partition on a 200GB Solid State Drive (SSD). The 504 KNLs originally installed as the Stampede1 KNL sub-system each have a 32GB &lt;code>/tmp&lt;/code> partition on 112GB SSDs. The latter nodes currently make up the development, long and flat-quadrant queues. Size of &lt;code>/tmp&lt;/code> partitions as of 24 Apr 2018.&lt;/p>
&lt;h3 id="skx-compute-nodes">SKX Compute Nodes&lt;/h3>
&lt;p>Stampede2 hosts 1,738 SKX compute nodes.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Model&lt;/th>
&lt;th>Intel Xeon Platinum 8160 (&amp;ldquo;Skylake&amp;rdquo;)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Total cores per KNL node&lt;/td>
&lt;td>48 cores on two socket (24 cores/socket)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hardware threads per core&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hardware threads per node&lt;/td>
&lt;td>48 x 2 = 96&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Clock rate&lt;/td>
&lt;td>2.1GHz nominal (1.4-3.7GHz depending on instruction set and number of active cores&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RAM&lt;/td>
&lt;td>192GB (2.67GHz) DDR4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cache&lt;/td>
&lt;td>32KB L1 data cache/core; 1MB L2/core. 33MB L2/socket.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Local storage on the SKX compute nodes is in tthe form of 144GB &lt;code>/tmp&lt;/code> partitions on a 200GB SSD.&lt;/p>
&lt;h2 id="file-systems">File Systems&lt;/h2>
&lt;p>Stampede2 mounts three shared Lustre file systems on which each user has account-specific directories for &lt;code>$HOME&lt;/code>, &lt;code>$WORK&lt;/code>, and &lt;code>$SCRATCH&lt;/code>. Each of the file systems are available on all Stampede2 nodes.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>File System&lt;/th>
&lt;th>Quota&lt;/th>
&lt;th>Key Features&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>$HOME&lt;/code>&lt;/td>
&lt;td>10GB; 200,000 files&lt;/td>
&lt;td>&lt;strong>Not intended for parallel or high-intensity file operations&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>Backed up regularly&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>~1PB Overall capacity. 2 Meta-Data Servers, 4 Object Storage Targets&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>Not purged&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>$WORK&lt;/code>&lt;/td>
&lt;td>1TB; 3,000,000 files across all&lt;/td>
&lt;td>&lt;strong>Not intended for parallel or high-intensity file operations&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>TACC systems.&lt;/td>
&lt;td>On Global Shared FS mounted on most TACC systems.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;strong>Not backed up&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>Not purged&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>$SCRATCH&lt;/code>&lt;/td>
&lt;td>no quota&lt;/td>
&lt;td>Overall ~30PB. 4 Meta-Data Servers. 66 Object Storage Targets&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;strong>Not backed up&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;strong>Files are subject to purge if access time &amp;gt;10 days old&lt;/strong>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;code>$SCRATCH&lt;/code> is a temporary storage space. Files not accessed in last 10 days will be subject to the purging. Reading or executing a file/script will update the access time. &lt;code>ls -ul&lt;/code> can be used to view access times.&lt;/p>
&lt;h2 id="accessing-the-system">Accessing the system&lt;/h2>
&lt;p>Access to all TACC systems requires setting up MFA. This is done using the TACC Token App. This app provides a token for each login, that needs to be given while using ssh.&lt;/p>
&lt;p>&lt;strong>Important:&lt;/strong> &lt;em>If user created TACC account using UT EID, then they&amp;rsquo;ll have to go to the reset password using the email-id provided and create a password that will then be used as a password in ssh.&lt;/em>&lt;/p>
&lt;p>To initiate a stampede2 ssh session, simply use ssh on the command-line.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ssh &amp;lt;username&amp;gt;@stampede2.tacc.utexas.edu
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If one wants to connect to a specific login node (not sure when would this be required), then the full domain can be used. For example, to log into the second node, use&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ssh &amp;lt;username&amp;gt;@login2.stampede2.tacc.utexas.edu
&lt;/code>&lt;/pre>&lt;/div>&lt;p>To connect with graphical support (X11), use the normal ssh flags of &lt;code>-X&lt;/code> or &lt;code>-Y&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ssh -X &amp;lt;username&amp;gt;@stampede2.tacc.utexas.edu
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Important&lt;/strong> &lt;code>ssh-keygen&lt;/code> should &lt;em>NOT&lt;/em> be run on Stampede2. When logging in, it creates the right key-pair by itself.&lt;/p>
&lt;h2 id="using-stampede2">Using Stampede2&lt;/h2>
&lt;p>Stampede2 nodes run &lt;strong>Red Hat Enterprise Linux 7&lt;/strong>.&lt;/p>
&lt;h3 id="configuring-account">Configuring account&lt;/h3>
&lt;h4 id="linux-shell">Linux Shell&lt;/h4>
&lt;p>The default login shell is &lt;strong>bash&lt;/strong>. It can be changed to csh, sh, tcsh, or zsh by submitting a ticket through TACC portal. &lt;code>chsh&lt;/code> command won&amp;rsquo;t work.&lt;/p>
&lt;h4 id="account-level-diagnostics">Account-level Diagnostics&lt;/h4>
&lt;p>TACC has a &lt;code>sanitytool&lt;/code> module that loads an account-level diagnostics package to detect account-level issues. It also provides fixes for the issues. To run the tool, execute the following commands&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">$ module load sanitytool
$ sanitycheck
&lt;/code>&lt;/pre>&lt;/div>&lt;p>It is a good habit to periodically run &lt;code>sanitycheck&lt;/code> as preventive measure. To read more help on it, run &lt;code>module help sanitytool&lt;/code>.&lt;/p>
&lt;h4 id="file-system-usage-recommendations">File System Usage Recommendations&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>File system&lt;/th>
&lt;th>Best practices&lt;/th>
&lt;th>Best activities&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>$HOME&lt;/td>
&lt;td>cron jobs&lt;/td>
&lt;td>compiling, editing&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>small scripts&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>environment settings&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$WORK&lt;/td>
&lt;td>store software installations&lt;/td>
&lt;td>staging datasets&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>original datasets that can&amp;rsquo;t be reproduced&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>job scripts and templates&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$SCRATCH&lt;/td>
&lt;td>&lt;strong>Temporary storage&lt;/strong>&lt;/td>
&lt;td>all job I/O activity&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>I/O files&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>job files&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>temporary datasets&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></content></item></channel></rss>