<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-12-20 Tue 15:57 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>How to remove all docker containers?</title>
<meta name="author" content="Chahak Mehta" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="../style.css" type="text/css"/>
</head>
<body>
<div id="preamble" class="status">
<div id="updated">Updated: 2022-12-20 Tue 15:54</div>
<nav>
<a href="/">Home</a>
<a href="/blog/sitemap.html">Posts</a>
</nav>
</div>
<div id="content" class="content">
<header>
<h1 class="title">How to remove all docker containers?</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org8a4f8a3">1. How to remove all docker containers?</a>
<ul>
<li><a href="#org0af98d8">1.1. Answer 1</a></li>
<li><a href="#org31a3eed">1.2. Answer 2</a></li>
<li><a href="#org332437e">1.3. Answer 3</a></li>
<li><a href="#orgca97baa">1.4. Answer 4</a></li>
<li><a href="#org106b988">1.5. Answer 5</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div id="outline-container-org8a4f8a3" class="outline-2">
<h2 id="org8a4f8a3"><span class="section-number-2">1.</span> <a href="https://stackoverflow.com/questions/52073000/how-to-remove-all-docker-containers">How to remove all docker containers?</a></h2>
<div class="outline-text-2" id="text-1">
<p>
I use following commands to remove all docker containers:
</p>
<pre class="example" id="orgc74f04d">
docker ps -q | xargs docker stop
docker ps -aq --no-trunc -f status=exited | xargs docker rm

</pre>
<p>
But anyway I see containers after:
</p>
<pre class="example" id="org9786535">
$ docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
70cb7107d00d        24820714bfc6        "wait-for-it.sh mysqâ¦"   21 minutes ago      Created                                 sql_migration

</pre>
<p>
Then I executed command
</p>
<pre class="example" id="org67204ca">
 docker rm sql_migration

</pre>
<p>
And it removed the container.
Can you please help to correct initial command and explain why it doesn&rsquo;t work.
Also I would be grateful if you explain how to change contaner to status like <code>sql_migration</code>
</p>

<p>
Comments
</p>
<ul class="org-ul">
<li>(<i>Robin Topper</i>) This might be helpful stackoverflow.com/questions/32723111/…</li>
<li>(<i>atline</i>) Possible duplicate of What does CREATED container mean in docker?</li>
</ul>
</div>
<div id="outline-container-org0af98d8" class="outline-3">
<h3 id="org0af98d8"><span class="section-number-3">1.1.</span> Answer 1</h3>
<div class="outline-text-3" id="text-1-1">
<p>
To remove all <code>exited</code> and <code>created</code> containers but not the <code>Up</code> (running) ones:
</p>
<pre class="example" id="orgdd98ff7">
docker container prune -f

</pre>
<p>
<code>-f</code> or <code>--force</code> prevents you from being prompted to answer the following:
</p>
<pre class="example" id="orge8a572f">
WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N]

</pre>
<p>
<b>example:</b> (Notice at the end that one container is not being removed)
</p>
<pre class="example" id="org58d964f">
$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
053ce57276b7        alpine              "/bin/sh"           3 seconds ago       Created                                         eager_meninsky
55f20431a536        alpine              "/bin/sh"           15 seconds ago      Up 14 seconds                                   hardcore_clarke
44cbe2dc81b0        alpine              "/bin/sh"           38 seconds ago      Exited (0) 37 seconds ago                       test
647747afb9a4        alpine              "/bin/sh"           18 hours ago        Exited (137) 18 hours ago                       admiring_visvesvaraya


$ docker container prune -f
Deleted Containers:
053ce57276b7d7008272e95991cf950268b9b32676b1389ec6e8ab6e6b755dc9
44cbe2dc81b0522e0fd0e53f28a4d3871b818b9b17681dd011c8680ab37b51e7
647747afb9a431a2c5040e6aba5119b199b94061c444ff0194aaa809dbf849b8

Total reclaimed space: 0B


$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
55f20431a536        alpine              "/bin/sh"           45 seconds ago      Up 44 seconds                           hardcore_clarke

</pre>
<pre class="example" id="orgf693c66">
docker container stop $(docker container ls -aq)
docker container prune -f

</pre>
<p>
<b>example:</b>
</p>
<pre class="example" id="org85a2649">
$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
da7ffd8efb62        alpine              "/bin/sh"           5 seconds ago       Created                                         quirky_poitras
31cb71a8899c        alpine              "/bin/sh"           20 seconds ago      Exited (0) 13 seconds ago                       elastic_shaw
becfdc81228c        alpine              "/bin/sh"           25 seconds ago      Up 24 seconds                                   thirsty_murdock


$ docker container stop $(docker container ls -aq)
da7ffd8efb62
31cb71a8899c
becfdc81228c


$ docker container prune -f
Deleted Containers:
da7ffd8efb623677882b1534008e66a1530baa94e0473be537ef5c415c928ba3
31cb71a8899c47472d0ccb5710e34ff08b4ef142599d4e857e3e69740a2e59b5
becfdc81228cdf41519102ea780956eed71a86103e849dff3d9f7cca0a54651f

Total reclaimed space: 5B


$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

</pre>

<p>
Comments:
</p>
<ul class="org-ul">
<li>(<i>Jed Lynch</i>) Docker is not as straight forward as I think it could be when it comes to rebuilding containers.  For me, there was a learning curve, and since building environments is not something I do all the time, I forget the exact syntax of the commands.  I will have to remember these commands.</li>
</ul>
</div>
</div>

<div id="outline-container-org31a3eed" class="outline-3">
<h3 id="org31a3eed"><span class="section-number-3">1.2.</span> Answer 2</h3>
<div class="outline-text-3" id="text-1-2">
<p>
I use the following command to remove all the docker containers: 
<code>docker rm $(docker ps -aq)</code>
</p>

<p>
Comments:
</p>
</div>
</div>


<div id="outline-container-org332437e" class="outline-3">
<h3 id="org332437e"><span class="section-number-3">1.3.</span> Answer 3</h3>
<div class="outline-text-3" id="text-1-3">
<p>
I use the following commands to remove all containers:
</p>
<pre class="example" id="org52de7cc">
docker stop $(docker ps -aq)
docker rm $(docker ps -aq)

</pre>

<p>
Comments:
</p>
</div>
</div>


<div id="outline-container-orgca97baa" class="outline-3">
<h3 id="orgca97baa"><span class="section-number-3">1.4.</span> Answer 4</h3>
<div class="outline-text-3" id="text-1-4">
<p>
One liner to stop / remove all of Docker containers:
<code>docker stop $(docker ps -a -q)</code>
<code>docker rm $(docker ps -a -q)</code>
</p>

<p>
Comments:
</p>
</div>
</div>


<div id="outline-container-org106b988" class="outline-3">
<h3 id="org106b988"><span class="section-number-3">1.5.</span> Answer 5</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Case 1. In order to remove only <b>Stopped Containers</b> use <code>sudo docker container prune -f</code>
</p>
<pre class="example" id="org7375448">
$ docker container prune
WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y
Deleted Containers:
4a7f7eebae0f63178aff7eb0aa39cd3f0627a203ab2df258c1a00b456cf20063
f98f9c2aa1eaf727e4ec9c0283bc7d4aa4762fbdba7f26191f26c97f64090360

Total reclaimed space: 212 B

</pre>
<p>
Case 2. In order to remove all existing docker containers on system ( In all states -  <b>running / stopped / exited containers</b> )  use~sudo docker container ls -aq | xargs sudo docker container rm~,
<b>commands explanation</b>:
</p>

<p>
Comments:
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/>
<footer>
<div class="generated">
Created with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.2 (<a href="https://orgmode.org">Org</a> mode 9.6)
</div>
</footer>
</div>
</body>
</html>