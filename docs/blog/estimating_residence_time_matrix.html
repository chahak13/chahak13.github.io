<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-11-20 Sun 22:18 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Estimating residence-time matrix</title>
<meta name="author" content="Chahak Mehta" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="../style.css" type="text/css"/>
</head>
<body>
<div id="preamble" class="status">
<div id="updated">Updated: 2022-11-19 Sat 19:42</div>
<nav>
<a href="/">Home</a>
<a href="/blog/sitemap.html">Posts</a>
</nav>
</div>
<div id="content" class="content">
<header>
<h1 class="title">Estimating residence-time matrix</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org6607c2b">1. AGEB data</a></li>
</ul>
</div>
</nav>
<p>
Extending Notes on: Horne, J. S., Garton, E. O., Krone, S. M., &amp; Lewis, J. S. (2007): Analyzing Animal Movements Using  Brownian Bridges, we now want to calculate the residence-time matrix for various polygons (AGEBs). To do this, we will use the <kbd>geopandas</kbd> library along with the data from Hermisillo that we have for a set of individuals. We will currently work with the data of just one individual.
</p>

<div id="outline-container-org6607c2b" class="outline-2">
<h2 id="org6607c2b"><span class="section-number-2">1.</span> AGEB data</h2>
<div class="outline-text-2" id="text-1">
<p>
The data for the AGEBs was provided by INEGI (National Institute of Statistics and Geography). There are a total of 582 AGEBs of which we might discard some that are not of interest. From the data, we particularly care about <kbd>CVE_AGEB</kbd> and the geometry - which is a polygon.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #51afef;">import</span> geopandas <span style="color: #51afef;">as</span> gpd

<span style="color: #dcaeea;">data</span> <span style="color: #51afef;">=</span> gpd.<span style="color: #51afef; font-weight: bold; font-style: italic;">read_file</span>(<span style="color: #98be65;">"/home/boticelli/Documents/uta/code/residence-time/bbmm-drive/26a.shp"</span>)
data.<span style="color: #51afef; font-weight: bold; font-style: italic;">head</span>()
</pre>
</div>

<p>
We can confirm that there are 582 AGEBs by checking the number of rows in the dataframe <kbd>data</kbd>.
</p>

<div class="org-src-container">
<pre class="src src-python">  <span style="color: #c678dd; font-weight: bold;">len</span>(data)
</pre>
</div>

<p>
Each <kbd>GeoSeries</kbd> has a corresponding <i>CRS</i> (Coordinate Reference System) that defines the system used for the projection. If a <kbd>GeoDataFrame</kbd> has only one column that corresponds to a <kbd>GeoSeries</kbd>, then the CRS of that series corresponds to the CRS of the dataframe. A dataframe can also have multiple <kbd>GeoSeries</kbd>, each with their own corresponding CRS. In such a case, one of the series is designated as the active geometry column and is used by default for any geometrical operations.
</p>

<div class="org-src-container">
<pre class="src src-python">data.<span style="color: #a9a1e1; font-style: italic;">crs</span>
</pre>
</div>

<p>
Here, the data we have is in the &ldquo;MEXICO<sub>ITRF</sub><sub>2008</sub><sub>LCC</sub>&rdquo; system. We will now transform the system to a Pseudomercator system for ease of use. This can be done using the <kbd>geopandas.GeoDataFrame.to_crs</kbd> function. The EPSG code corresponding to Pseudomercator projection is <i>EPSG:3857</i>.
</p>

<div class="org-src-container">
<pre class="src src-python">data.<span style="color: #51afef; font-weight: bold; font-style: italic;">to_crs</span>(<span style="color: #98be65;">"EPSG:3857"</span>, <span style="color: #51afef; font-weight: bold;">inplace</span><span style="color: #51afef;">=</span><span style="color: #c678dd;">True</span>)
</pre>
</div>

<p>
We can also visualize this data using plotting functionality in geopandas and matplotlib.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #51afef;">import</span> matplotlib.pyplot <span style="color: #51afef;">as</span> plt

data.<span style="color: #51afef; font-weight: bold; font-style: italic;">plot</span>(<span style="color: #51afef; font-weight: bold;">figsize</span><span style="color: #51afef;">=</span>(<span style="color: #a9a1e1;">5</span>,<span style="color: #a9a1e1;">5</span>))
plt.<span style="color: #51afef; font-weight: bold; font-style: italic;">savefig</span>(<span style="color: #98be65;">'/home/boticelli/Documents/uta/code/residence-time/agebs.png'</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr/>
<footer>
<div class="generated">
Created with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.2 (<a href="https://orgmode.org">Org</a> mode 9.6)
</div>
</footer>
</div>
</body>
</html>